
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

model User {
  id       String @id @default(uuid())
  email    String @unique
  username String @unique
  password String
  role     String  @default("user")
  stories  Story[]
  createdAt DateTime @default(now())
}

model Story {
  id       String @id @default(uuid())
  author   User   @relation(fields: [authorId], references: [id])
  authorId String
  title    String
  slug     String  @unique
  summary  String?
  coverUrl String?
  status   String  @default("draft")
  volumes  Volume[]
  createdAt DateTime @default(now())
}

model Volume {
  id      String @id @default(uuid())
  story   Story  @relation(fields: [storyId], references: [id])
  storyId String
  title   String
  order   Int
  chapters Chapter[]
}

model Chapter {
  id        String @id @default(uuid())
  volume    Volume @relation(fields: [volumeId], references: [id])
  volumeId  String
  title     String
  content   String
  images    Json?
  order     Int
  createdAt DateTime @default(now())
}
